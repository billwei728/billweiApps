
// Form Validation
(function() {
    'use strict';
    window.addEventListener('load', function() {
        var forms = document.getElementsByClassName('needs-validation');
        // Loop over them and prevent submission
        var validation = Array.prototype.filter.call(forms, function(form) {
            form.addEventListener('submit', function(event) {
                if (form.checkValidity() === false) {
                    event.preventDefault();
                    event.stopPropagation();
                    if ($("#module_name_new").val() == '') {
                        $("#err_module_name_new").addClass("d-block");
                    }
                    if ($("#parent_node_new").val() == '') {
                        $("#err_parent_node_new").addClass("d-block");
                    }
                } else {
                    $(".loader").fadeIn();
                    // checkBoxValidation($(this).attr('id'));
                }
                form.classList.add('was-validated');
            }, false);
        });
    }, false);
})();

// function checkBoxValidation(formId) {
//     var anyBoxesChecked = false;
//     var numRecords = 0;

//     $('#' + formId + ' input[name="rowCheck[]"]').each(function() {
//         if ($(this).is(":checked")) {
//             anyBoxesChecked = true;
//             numRecords++;
//         }
//     });

//     if (anyBoxesChecked == false) {
//         alert('Please select at least one record(s) to update!');
//         event.preventDefault();
//         event.stopPropagation();
//     }

//     if (numRecords > 0) {
//         $('#' + formId).submit();
//     }
// }

// Checkbox Validation
$(function() {
    var requiredCheckboxes = $(':checkbox[required]');
    requiredCheckboxes.change(function(){
        if (requiredCheckboxes.is(':checked')) {
            requiredCheckboxes.removeAttr('required');
        }
        else {
            requiredCheckboxes.attr('required', 'required');
        }
    });
});
